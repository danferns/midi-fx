import{S as B,i as C,s as D,e as w,B as ee,a as x,q as p,b as Y,C as v,D as te,n as q,d as F,Z,K as O,y as U,R as le,G as ne,P as z,f as I,m as H,t as d,g as A,h as M,k as S,l as Q,I as E,J as T,F as N,c as V,j as W,L as se}from"./index.9537bdcf.js";import{w as re}from"./index.f5911502.js";import{c as ie}from"./NodeUtil.de1e0169.js";import{N as ae}from"./NodeUI.ffd646b1.js";const j=[];for(let t=0;t<16;t++){const e=(t+8)*360/16,l=50+25*(t%4)/4,n=75-25*(t%4)/4,o=re({h:e,s:l,l:n});j.push(o)}function oe(t){let e,l,n=`${t[2]?5:0}px ${t[2]?0:5}px 0px 0px`;return{c(){var o;e=w("div"),l=ee(t[0]),x(e,"class","svelte-zssg75"),p(e,"border","solid "+((o=t[1])==null?void 0:o.toHex()),!1),p(e,"border-width",n,!1),p(e,"background",t[3]?"hsl(0 0% 30%)":`hsla(0, 0%, 30%, ${t[4]*100}%)`,!1)},m(o,h){Y(o,e,h),v(e,l)},p(o,[h]){var u;h&1&&te(l,o[0]),h&2&&p(e,"border","solid "+((u=o[1])==null?void 0:u.toHex()),!1),h&4&&n!==(n=`${o[2]?5:0}px ${o[2]?0:5}px 0px 0px`)&&p(e,"border-width",n,!1),h&24&&p(e,"background",o[3]?"hsl(0 0% 30%)":`hsla(0, 0%, 30%, ${o[4]*100}%)`,!1)},i:q,o:q,d(o){o&&F(e)}}}function he(t,e,l){let{label:n=""}=e,{color:o}=e,{xAxis:h=!0}=e,{hover:u=!1}=e,{highlight:s=!1}=e,g=0,r=!1;Z(()=>{s===!0&&(l(4,g=1),r||(r=!0,m()))});function m(){g>0?(l(4,g=Math.max(g-.05,0)),requestAnimationFrame(m)):r=!1}return t.$$set=i=>{"label"in i&&l(0,n=i.label),"color"in i&&l(1,o=i.color),"xAxis"in i&&l(2,h=i.xAxis),"hover"in i&&l(3,u=i.hover),"highlight"in i&&l(5,s=i.highlight)},[n,o,h,u,g,s]}class $ extends B{constructor(e){super(),C(this,e,he,oe,D,{label:0,color:1,xAxis:2,hover:3,highlight:5})}}function fe(t){let e,l,n;return{c(){e=w("div"),x(e,"class","svelte-123tdlj"),O(e,"active",t[0]),p(e,"background",t[0]===0?"hsl(0 0% 20%)":`hsla(0, 0%, ${t[1]*100}%, 100%)`,!1)},m(o,h){Y(o,e,h),l||(n=[U(e,"click",le(t[5])),U(e,"mouseover",t[3]),U(e,"mouseleave",t[4])],l=!0)},p(o,[h]){h&1&&O(e,"active",o[0]),h&3&&p(e,"background",o[0]===0?"hsl(0 0% 20%)":`hsla(0, 0%, ${o[1]*100}%, 100%)`,!1)},i:q,o:q,d(o){o&&F(e),l=!1,ne(n)}}}function ue(t,e,l){let{state:n=0}=e,{highlight:o=!1}=e,h=.8,u=!1;Z(()=>{o===!0&&(l(1,h=1),u||(u=!0,s()))});function s(){h>.8?(l(1,h=Math.max(h-.01,0)),requestAnimationFrame(s)):u=!1}function g(i){z.call(this,t,i)}function r(i){z.call(this,t,i)}const m=()=>{l(0,n=1-n)};return t.$$set=i=>{"state"in i&&l(0,n=i.state),"highlight"in i&&l(2,o=i.highlight)},[n,h,o,g,r,m]}class ce extends B{constructor(e){super(),C(this,e,ue,fe,D,{state:0,highlight:2})}}function G(t,e,l){const n=t.slice();return n[11]=e[l],n[12]=e,n[13]=l,n}function J(t,e,l){const n=t.slice();return n[14]=e[l],n[15]=e,n[16]=l,n}function K(t,e,l){const n=t.slice();return n[14]=e[l],n[16]=l,n}function L(t){let e,l;return e=new $({props:{label:t[14].name,color:t[14].color,xAxis:!0,hover:t[6][0]===t[16],highlight:t[1].has(t[16])}}),{c(){I(e.$$.fragment)},m(n,o){H(e,n,o),l=!0},p(n,o){const h={};o&8&&(h.label=n[14].name),o&8&&(h.color=n[14].color),o&64&&(h.hover=n[6][0]===n[16]),o&2&&(h.highlight=n[1].has(n[16])),e.$set(h)},i(n){l||(d(e.$$.fragment,n),l=!0)},o(n){A(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}function P(t){let e,l,n;function o(s){t[8](s,t[16],t[13])}function h(){return t[9](t[16],t[13])}let u={highlight:t[5][t[16]][t[13]]==1};return t[0][t[16]][t[13]]!==void 0&&(u.state=t[0][t[16]][t[13]]),e=new ce({props:u}),V.push(()=>W(e,"state",o)),e.$on("mouseover",h),e.$on("mouseleave",t[10]),{c(){I(e.$$.fragment)},m(s,g){H(e,s,g),n=!0},p(s,g){t=s;const r={};g&32&&(r.highlight=t[5][t[16]][t[13]]==1),!l&&g&1&&(l=!0,r.state=t[0][t[16]][t[13]],Q(()=>l=!1)),e.$set(r)},i(s){n||(d(e.$$.fragment,s),n=!0)},o(s){A(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function R(t){let e,l,n,o,h;l=new $({props:{label:t[11].name,color:t[11].color,xAxis:!1,hover:t[6][1]===t[13],highlight:t[2].has(t[13])}});let u=t[3],s=[];for(let r=0;r<u.length;r+=1)s[r]=P(J(t,u,r));const g=r=>A(s[r],1,1,()=>{s[r]=null});return{c(){e=w("div"),I(l.$$.fragment),n=S();for(let r=0;r<s.length;r+=1)s[r].c();o=S(),x(e,"class","row svelte-qj9p9k")},m(r,m){Y(r,e,m),H(l,e,null),v(e,n);for(let i=0;i<s.length;i+=1)s[i].m(e,null);v(e,o),h=!0},p(r,m){const i={};if(m&16&&(i.label=r[11].name),m&16&&(i.color=r[11].color),m&64&&(i.hover=r[6][1]===r[13]),m&4&&(i.highlight=r[2].has(r[13])),l.$set(i),m&105){u=r[3];let _;for(_=0;_<u.length;_+=1){const a=J(r,u,_);s[_]?(s[_].p(a,m),d(s[_],1)):(s[_]=P(a),s[_].c(),d(s[_],1),s[_].m(e,o))}for(E(),_=u.length;_<s.length;_+=1)g(_);T()}},i(r){if(!h){d(l.$$.fragment,r);for(let m=0;m<u.length;m+=1)d(s[m]);h=!0}},o(r){A(l.$$.fragment,r),s=s.filter(Boolean);for(let m=0;m<s.length;m+=1)A(s[m]);h=!1},d(r){r&&F(e),M(l),N(s,r)}}}function ge(t){let e,l,n,o,h,u,s=t[3],g=[];for(let a=0;a<s.length;a+=1)g[a]=L(K(t,s,a));const r=a=>A(g[a],1,1,()=>{g[a]=null});let m=t[4],i=[];for(let a=0;a<m.length;a+=1)i[a]=R(G(t,m,a));const _=a=>A(i[a],1,1,()=>{i[a]=null});return{c(){e=w("div"),l=w("div"),n=w("div"),o=S();for(let a=0;a<g.length;a+=1)g[a].c();h=S();for(let a=0;a<i.length;a+=1)i[a].c();x(n,"class","block svelte-qj9p9k"),x(l,"class","row svelte-qj9p9k"),x(e,"class","matrix svelte-qj9p9k")},m(a,c){Y(a,e,c),v(e,l),v(l,n),v(l,o);for(let f=0;f<g.length;f+=1)g[f].m(l,null);v(e,h);for(let f=0;f<i.length;f+=1)i[f].m(e,null);u=!0},p(a,[c]){if(c&74){s=a[3];let f;for(f=0;f<s.length;f+=1){const b=K(a,s,f);g[f]?(g[f].p(b,c),d(g[f],1)):(g[f]=L(b),g[f].c(),d(g[f],1),g[f].m(l,null))}for(E(),f=s.length;f<g.length;f+=1)r(f);T()}if(c&125){m=a[4];let f;for(f=0;f<m.length;f+=1){const b=G(a,m,f);i[f]?(i[f].p(b,c),d(i[f],1)):(i[f]=R(b),i[f].c(),d(i[f],1),i[f].m(e,null))}for(E(),f=m.length;f<i.length;f+=1)_(f);T()}},i(a){if(!u){for(let c=0;c<s.length;c+=1)d(g[c]);for(let c=0;c<m.length;c+=1)d(i[c]);u=!0}},o(a){g=g.filter(Boolean);for(let c=0;c<g.length;c+=1)A(g[c]);i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)A(i[c]);u=!1},d(a){a&&F(e),N(g,a),N(i,a)}}}function me(t,e,l){let{xArray:n}=e,{yArray:o}=e,{state:h}=e,{xHighlight:u=new Set}=e,{yHighlight:s=new Set}=e,{YIsInput:g=!1}=e,r=[[]],m=[-1,-1];function i(c,f,b){t.$$.not_equal(h[f][b],c)&&(h[f][b]=c,l(0,h))}const _=(c,f)=>{l(6,m=[c,f])},a=()=>{l(6,m=[-1,-1])};return t.$$set=c=>{"xArray"in c&&l(3,n=c.xArray),"yArray"in c&&l(4,o=c.yArray),"state"in c&&l(0,h=c.state),"xHighlight"in c&&l(1,u=c.xHighlight),"yHighlight"in c&&l(2,s=c.yHighlight),"YIsInput"in c&&l(7,g=c.YIsInput)},t.$$.update=()=>{if(t.$$.dirty&33&&(r.length!==h.length||r[0].length!==h[0].length)&&l(5,r=Array(h.length).fill(0).map(()=>Array(h[0].length).fill(0))),t.$$.dirty&167){let c=new Set,f=new Set;r.forEach((b,k)=>{b.forEach((pe,y)=>{h[k][y]!==0?g?s.has(y)?(l(5,r[k][y]=1,r),c.add(k)):l(5,r[k][y]=0,r):u.has(k)?(l(5,r[k][y]=1,r),f.add(y)):l(5,r[k][y]=0,r):l(5,r[k][y]=0,r)})}),g?l(1,u=c):l(2,s=f)}},[h,u,s,n,o,r,m,g,i,_,a]}class _e extends B{constructor(e){super(),C(this,e,me,ge,D,{xArray:3,yArray:4,state:0,xHighlight:1,yHighlight:2,YIsInput:7})}}function be(t){let e,l,n;function o(u){t[7](u)}let h={xArray:t[2],yArray:t[3],xHighlight:t[1]};return t[0].matrix!==void 0&&(h.state=t[0].matrix),e=new _e({props:h}),V.push(()=>W(e,"state",o)),{c(){I(e.$$.fragment)},m(u,s){H(e,u,s),n=!0},p(u,s){const g={};s&2&&(g.xHighlight=u[1]),!l&&s&1&&(l=!0,g.state=u[0].matrix,Q(()=>l=!1)),e.$set(g)},i(u){n||(d(e.$$.fragment,u),n=!0)},o(u){A(e.$$.fragment,u),n=!1},d(u){M(e,u)}}}function de(t){let e,l;return e=new ae({props:{$$slots:{default:[be]},$$scope:{ctx:t}}}),{c(){I(e.$$.fragment)},m(n,o){H(e,n,o),l=!0},p(n,[o]){const h={};o&1027&&(h.$$scope={dirty:o,ctx:n}),e.$set(h)},i(n){l||(d(e.$$.fragment,n),l=!0)},o(n){A(e.$$.fragment,n),l=!1},d(n){M(e,n)}}}const He=`
    Mapps MIDI messages from one channel, to any channel(s).
    The X-Axis of the channel matrix represents the input channels,
    and the Y-Axis represents the output channels. The channel numbers
    will highlight when messages are being transferred.
    `,X=Array(16).fill(0).map((t,e)=>({name:`${e+1}`,color:j[e]}));function ke(t){return t>=128&&t<=239}function Ae(t){return t&15}function ye(t,e,l){let{id:n}=e;const o={MIDI:(a,c,f)=>{if(ke(a)){const b=Ae(a);m(b);for(let k=0;k<16;k++)u.matrix[b][k]!==0&&s("MIDI",a-b+k,c,f)}else s("MIDI",a,c,f)}},h={MIDI:new Set};let{state:u={matrix:Array(16).fill(Array(16).fill(0)).map((a,c)=>a.map((f,b)=>c===b?1:0))}}=e;const s=ie(n,h),g=X,r=X;async function m(a){i.add(a),l(1,i),await se(),i.delete(a),l(1,i)}let i=new Set;function _(a){t.$$.not_equal(u.matrix,a)&&(u.matrix=a,l(0,u))}return t.$$set=a=>{"id"in a&&l(4,n=a.id),"state"in a&&l(0,u=a.state)},[u,i,g,r,n,o,h,_]}class Me extends B{constructor(e){super(),C(this,e,ye,de,D,{id:4,inputs:5,outputs:6,state:0})}get inputs(){return this.$$.ctx[5]}get outputs(){return this.$$.ctx[6]}}export{Me as default,He as doc};

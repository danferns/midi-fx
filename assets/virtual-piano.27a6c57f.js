import{S as B,i as G,s as A,p as re,e as Y,a as c,K as D,b as p,u as ue,r as ce,v as me,t as b,g as k,d as w,A as T,E as q,f as O,k as E,q as X,m as I,C as M,x,y as R,z as _e,h as N,B as S,D as de,V as F,n as K,G as pe,I as we,J as ye,F as be,P as H,W as L,R as ke,H as ze,X as Ce,Y as Oe,c as ee,j as te,l as ne}from"./index.9537bdcf.js";import{c as Ie}from"./NodeUtil.de1e0169.js";import{H as ge}from"./HorizontalLayout.d975931d.js";import{N as he}from"./NodeUI.ffd646b1.js";import{T as le}from"./Title.c6515a67.js";import{isNoteOn as Ne,isNoteOff as De}from"./note-splitter.0991ca8f.js";import{b as se}from"./MathUtil.63f01330.js";function Le(l){let e,t;const n=l[2].default,i=re(n,l,l[1],null);return{c(){e=Y("div"),i&&i.c(),c(e,"class","svelte-d2n32o"),D(e,"folded",l[0])},m(s,f){p(s,e,f),i&&i.m(e,null),t=!0},p(s,[f]){i&&i.p&&(!t||f&2)&&ue(i,n,s,s[1],t?me(n,s[1],f,null):ce(s[1]),null),f&1&&D(e,"folded",s[0])},i(s){t||(b(i,s),t=!0)},o(s){k(i,s),t=!1},d(s){s&&w(e),i&&i.d(s)}}}function Pe(l,e,t){let{$$slots:n={},$$scope:i}=e,{folded:s=!1}=e;const f=T();return l.$$set=o=>{"folded"in o&&t(0,s=o.folded),"$$scope"in o&&t(1,i=o.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&f("resize")},[s,i,n]}class Me extends B{constructor(e){super(),G(this,e,Pe,Le,A,{folded:0})}}function Re(l){let e,t;return{c(){e=S("-"),t=S(l[2])},m(n,i){p(n,e,i),p(n,t,i)},p(n,i){i&4&&de(t,n[2])},d(n){n&&w(e),n&&w(t)}}}function Ee(l){let e,t;return{c(){e=S("+"),t=S(l[1])},m(n,i){p(n,e,i),p(n,t,i)},p(n,i){i&2&&de(t,n[1])},d(n){n&&w(e),n&&w(t)}}}function Be(l){let e,t,n,i,s,f,o,a,r;return t=new q({props:{$$slots:{default:[Re]},$$scope:{ctx:l}}}),t.$on("click",l[3]),f=new q({props:{$$slots:{default:[Ee]},$$scope:{ctx:l}}}),f.$on("click",l[5]),{c(){e=Y("div"),O(t.$$.fragment),n=E(),i=Y("input"),s=E(),O(f.$$.fragment),c(i,"type","number"),c(i,"class","svelte-8h26oe"),X(i,"width","4ch",!1),c(e,"class","svelte-8h26oe")},m(m,u){p(m,e,u),I(t,e,null),M(e,n),M(e,i),x(i,l[0]),M(e,s),I(f,e,null),o=!0,a||(r=R(i,"input",l[4]),a=!0)},p(m,[u]){const d={};u&68&&(d.$$scope={dirty:u,ctx:m}),t.$set(d),u&1&&_e(i.value)!==m[0]&&x(i,m[0]);const _={};u&66&&(_.$$scope={dirty:u,ctx:m}),f.$set(_)},i(m){o||(b(t.$$.fragment,m),b(f.$$.fragment,m),o=!0)},o(m){k(t.$$.fragment,m),k(f.$$.fragment,m),o=!1},d(m){m&&w(e),N(t),N(f),a=!1,r()}}}function Ge(l,e,t){let{value:n}=e,{increment:i=1}=e,{decrement:s=1}=e;const f=()=>{t(0,n-=s)};function o(){n=_e(this.value),t(0,n)}const a=()=>{t(0,n+=i)};return l.$$set=r=>{"value"in r&&t(0,n=r.value),"increment"in r&&t(1,i=r.increment),"decrement"in r&&t(2,s=r.decrement)},[n,i,s,f,o,a]}class ie extends B{constructor(e){super(),G(this,e,Ge,Be,A,{value:0,increment:1,decrement:2})}}function Ae(l){let e,t,n;return{c(){e=Y("div"),X(e,"--width",l[1]-l[1]*.47*+!l[3]+"px"),X(e,"transform","translate("+l[2]+"px)"),c(e,"draggable","false"),c(e,"class","svelte-i9ejrf"),D(e,"accidental",!l[3]),D(e,"natural",l[3]),D(e,"pressed",l[0])},m(i,s){p(i,e,s),t||(n=[R(e,"mousedown",F(l[4])),R(e,"mouseup",F(l[5])),R(e,"mouseenter",l[7]),R(e,"mouseleave",l[8]),R(e,"touchstart",F(l[4])),R(e,"touchend",F(l[5]))],t=!0)},p(i,[s]){s&2&&X(e,"--width",i[1]-i[1]*.47*+!i[3]+"px"),s&4&&X(e,"transform","translate("+i[2]+"px)"),s&1&&D(e,"pressed",i[0])},i:K,o:K,d(i){i&&w(e),t=!1,pe(n)}}}function We(l,e,t){let{noteNum:n}=e,{keyWidth:i=56}=e,{pressed:s=!1}=e;const f=T();let o=![1,3,6,8,10].includes(n%12),a=0;function r(){s||(f("noteon",n),t(0,s=!0))}function m(){!s||(f("noteoff",n),t(0,s=!1))}const u=_=>{_.buttons&&r()},d=_=>{_.buttons&&m()};return l.$$set=_=>{"noteNum"in _&&t(6,n=_.noteNum),"keyWidth"in _&&t(1,i=_.keyWidth),"pressed"in _&&t(0,s=_.pressed)},l.$$.update=()=>{l.$$.dirty&66&&(o||([1,6].includes(n%12)?t(2,a=-i/18):[3,10].includes(n%12)&&t(2,a=i/18)))},[s,i,a,o,r,m,n,u,d]}class Xe extends B{constructor(e){super(),G(this,e,We,Ae,A,{noteNum:6,keyWidth:1,pressed:0})}}function fe(l,e,t){const n=l.slice();return n[8]=e[t],n}function ae(l){let e,t;return e=new Xe({props:{noteNum:l[8],pressed:l[1].includes(l[8]),keyWidth:(l[3]-16)/(l[0]*7+1)}}),e.$on("noteon",l[6]),e.$on("noteoff",l[7]),{c(){O(e.$$.fragment)},m(n,i){I(e,n,i),t=!0},p(n,i){const s={};i&16&&(s.noteNum=n[8]),i&18&&(s.pressed=n[1].includes(n[8])),i&9&&(s.keyWidth=(n[3]-16)/(n[0]*7+1)),e.$set(s)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function Ye(l){let e,t,n=`${l[2]-16}px`,i,s=l[4],f=[];for(let a=0;a<s.length;a+=1)f[a]=ae(fe(l,s,a));const o=a=>k(f[a],1,1,()=>{f[a]=null});return{c(){e=Y("div"),t=Y("div");for(let a=0;a<f.length;a+=1)f[a].c();c(t,"class","svelte-1syzd0t"),X(t,"height",n,!1),c(e,"class","keyboard mousedrag svelte-1syzd0t")},m(a,r){p(a,e,r),M(e,t);for(let m=0;m<f.length;m+=1)f[m].m(t,null);i=!0},p(a,[r]){if(r&27){s=a[4];let m;for(m=0;m<s.length;m+=1){const u=fe(a,s,m);f[m]?(f[m].p(u,r),b(f[m],1)):(f[m]=ae(u),f[m].c(),b(f[m],1),f[m].m(t,null))}for(we(),m=s.length;m<f.length;m+=1)o(m);ye()}r&4&&n!==(n=`${a[2]-16}px`)&&X(t,"height",n,!1)},i(a){if(!i){for(let r=0;r<s.length;r+=1)b(f[r]);i=!0}},o(a){f=f.filter(Boolean);for(let r=0;r<f.length;r+=1)k(f[r]);i=!1},d(a){a&&w(e),be(f,a)}}}function Ke(l,e,t){let{octaves:n=2}=e,{middleC:i=60}=e,{keysPressed:s=[]}=e,{height:f=160}=e,{width:o=1400}=e,a;function r(u){H.call(this,l,u)}function m(u){H.call(this,l,u)}return l.$$set=u=>{"octaves"in u&&t(0,n=u.octaves),"middleC"in u&&t(5,i=u.middleC),"keysPressed"in u&&t(1,s=u.keysPressed),"height"in u&&t(2,f=u.height),"width"in u&&t(3,o=u.width)},l.$$.update=()=>{l.$$.dirty&33&&t(4,a=[...Array(n*12+1).keys()].map(u=>u+(i-Math.floor(n/2)*12)))},[n,s,f,o,a,i,r,m]}class Se extends B{constructor(e){super(),G(this,e,Ke,Ye,A,{octaves:0,middleC:5,keysPressed:1,height:2,width:3})}}function Fe(l){let e,t,n,i,s,f,o,a,r,m,u,d;return{c(){e=L("svg"),t=L("circle"),s=L("circle"),a=L("circle"),c(t,"r",l[1]),c(t,"cx",n=l[0]-l[1]),c(t,"cy",i=l[0]-l[1]),c(t,"class","svelte-1x9mm1o"),c(s,"r",l[1]),c(s,"cx",f=l[0]-l[1]),c(s,"cy",o=l[0]-3.5*l[1]),c(s,"class","svelte-1x9mm1o"),c(a,"r",l[1]),c(a,"cx",r=l[0]-3.5*l[1]),c(a,"cy",m=l[0]-l[1]),c(a,"class","svelte-1x9mm1o"),c(e,"height",l[0]),c(e,"width",l[0]),c(e,"class","mousedrag svelte-1x9mm1o")},m(_,y){p(_,e,y),M(e,t),M(e,s),M(e,a),u||(d=R(e,"pointerdown",ke(l[2])),u=!0)},p(_,[y]){y&2&&c(t,"r",_[1]),y&3&&n!==(n=_[0]-_[1])&&c(t,"cx",n),y&3&&i!==(i=_[0]-_[1])&&c(t,"cy",i),y&2&&c(s,"r",_[1]),y&3&&f!==(f=_[0]-_[1])&&c(s,"cx",f),y&3&&o!==(o=_[0]-3.5*_[1])&&c(s,"cy",o),y&2&&c(a,"r",_[1]),y&3&&r!==(r=_[0]-3.5*_[1])&&c(a,"cx",r),y&3&&m!==(m=_[0]-_[1])&&c(a,"cy",m),y&1&&c(e,"height",_[0]),y&1&&c(e,"width",_[0])},i:K,o:K,d(_){_&&w(e),u=!1,d()}}}function Ve(l,e,t){let{size:n=32}=e,{radius:i=n/5}=e,{onResize:s}=e;function f(r){r.pointerType==="mouse"&&r.buttons!==1||(r.stopPropagation(),r.preventDefault(),window.addEventListener("pointermove",o),window.addEventListener("pointerup",a),window.addEventListener("blur",a))}function o(r){r.stopPropagation(),r.preventDefault(),s(r.movementX,r.movementY)}function a(r){window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",a),window.removeEventListener("blur",a)}return l.$$set=r=>{"size"in r&&t(0,n=r.size),"radius"in r&&t(1,i=r.radius),"onResize"in r&&t(3,s=r.onResize)},[n,i,f,s]}class qe extends B{constructor(e){super(),G(this,e,Ve,Fe,A,{size:0,radius:1,onResize:3})}}function He(l){let e,t;const n=l[1].default,i=re(n,l,l[0],null);return{c(){e=Y("div"),i&&i.c(),c(e,"class","svelte-1619d8k")},m(s,f){p(s,e,f),i&&i.m(e,null),t=!0},p(s,[f]){i&&i.p&&(!t||f&1)&&ue(i,n,s,s[0],t?me(n,s[0],f,null):ce(s[0]),null)},i(s){t||(b(i,s),t=!0)},o(s){k(i,s),t=!1},d(s){s&&w(e),i&&i.d(s)}}}function je(l,e,t){let{$$slots:n={},$$scope:i}=e;return l.$$set=s=>{"$$scope"in s&&t(0,i=s.$$scope)},[i,n]}class Te extends B{constructor(e){super(),G(this,e,je,He,A,{})}}var ve={};(function(l){Object.defineProperty(l,"__esModule",{value:!0});var e="fas",t="gear",n=512,i=512,s=[9881,"cog"],f="f013",o="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336c44.2 0 80-35.8 80-80s-35.8-80-80-80s-80 35.8-80 80s35.8 80 80 80z";l.definition={prefix:e,iconName:t,icon:[n,i,s,f,o]},l.faGear=l.definition,l.prefix=e,l.iconName=t,l.width=n,l.height=i,l.ligatures=s,l.unicode=f,l.svgPathData=o,l.aliases=s})(ve);const V=parseFloat;function j(l,e=";"){let t;if(Array.isArray(l))t=l.filter(n=>n);else{t=[];for(const n in l)l[n]&&t.push(`${n}:${l[n]}`)}return t.join(e)}function Ue(l,e,t,n){let i,s;const f="1em";let o,a,r,m="-.125em";const u="visible";return n&&(r="center",s="1.25em"),t&&(i=t),e&&(e=="lg"?(a="1.33333em",o=".75em",m="-.225em"):e=="xs"?a=".75em":e=="sm"?a=".875em":a=e.replace("x","em")),j([j({float:i,width:s,height:f,"line-height":o,"font-size":a,"text-align":r,"vertical-align":m,"transform-origin":"center",overflow:u}),l])}function Je(l,e,t,n,i,s=1,f="",o=""){let a=1,r=1;return i&&(i=="horizontal"?a=-1:i=="vertical"?r=-1:a=r=-1),j([`translate(${V(e)*s}${f},${V(t)*s}${f})`,`scale(${a*V(l)},${r*V(l)})`,n&&`rotate(${n}${o})`]," ")}function oe(l){let e,t,n,i,s,f,o,a;function r(d,_){return typeof d[10][4]=="string"?Ze:Qe}let m=r(l),u=m(l);return{c(){e=L("svg"),t=L("g"),n=L("g"),u.c(),c(n,"transform",l[12]),c(t,"transform",i="translate("+l[10][0]/2+" "+l[10][1]/2+")"),c(t,"transform-origin",s=l[10][0]/4+" 0"),c(e,"id",f=l[1]||void 0),c(e,"class",o="svelte-fa "+l[0]+" svelte-1cj2gr0"),c(e,"style",l[11]),c(e,"viewBox",a="0 0 "+l[10][0]+" "+l[10][1]),c(e,"aria-hidden","true"),c(e,"role","img"),c(e,"xmlns","http://www.w3.org/2000/svg"),D(e,"pulse",l[4]),D(e,"spin",l[3])},m(d,_){p(d,e,_),M(e,t),M(t,n),u.m(n,null)},p(d,_){m===(m=r(d))&&u?u.p(d,_):(u.d(1),u=m(d),u&&(u.c(),u.m(n,null))),_&4096&&c(n,"transform",d[12]),_&1024&&i!==(i="translate("+d[10][0]/2+" "+d[10][1]/2+")")&&c(t,"transform",i),_&1024&&s!==(s=d[10][0]/4+" 0")&&c(t,"transform-origin",s),_&2&&f!==(f=d[1]||void 0)&&c(e,"id",f),_&1&&o!==(o="svelte-fa "+d[0]+" svelte-1cj2gr0")&&c(e,"class",o),_&2048&&c(e,"style",d[11]),_&1024&&a!==(a="0 0 "+d[10][0]+" "+d[10][1])&&c(e,"viewBox",a),_&17&&D(e,"pulse",d[4]),_&9&&D(e,"spin",d[3])},d(d){d&&w(e),u.d()}}}function Qe(l){let e,t,n,i,s,f,o,a,r,m;return{c(){e=L("path"),f=L("path"),c(e,"d",t=l[10][4][0]),c(e,"fill",n=l[6]||l[2]||"currentColor"),c(e,"fill-opacity",i=l[9]!=!1?l[7]:l[8]),c(e,"transform",s="translate("+l[10][0]/-2+" "+l[10][1]/-2+")"),c(f,"d",o=l[10][4][1]),c(f,"fill",a=l[5]||l[2]||"currentColor"),c(f,"fill-opacity",r=l[9]!=!1?l[8]:l[7]),c(f,"transform",m="translate("+l[10][0]/-2+" "+l[10][1]/-2+")")},m(u,d){p(u,e,d),p(u,f,d)},p(u,d){d&1024&&t!==(t=u[10][4][0])&&c(e,"d",t),d&68&&n!==(n=u[6]||u[2]||"currentColor")&&c(e,"fill",n),d&896&&i!==(i=u[9]!=!1?u[7]:u[8])&&c(e,"fill-opacity",i),d&1024&&s!==(s="translate("+u[10][0]/-2+" "+u[10][1]/-2+")")&&c(e,"transform",s),d&1024&&o!==(o=u[10][4][1])&&c(f,"d",o),d&36&&a!==(a=u[5]||u[2]||"currentColor")&&c(f,"fill",a),d&896&&r!==(r=u[9]!=!1?u[8]:u[7])&&c(f,"fill-opacity",r),d&1024&&m!==(m="translate("+u[10][0]/-2+" "+u[10][1]/-2+")")&&c(f,"transform",m)},d(u){u&&w(e),u&&w(f)}}}function Ze(l){let e,t,n,i;return{c(){e=L("path"),c(e,"d",t=l[10][4]),c(e,"fill",n=l[2]||l[5]||"currentColor"),c(e,"transform",i="translate("+l[10][0]/-2+" "+l[10][1]/-2+")")},m(s,f){p(s,e,f)},p(s,f){f&1024&&t!==(t=s[10][4])&&c(e,"d",t),f&36&&n!==(n=s[2]||s[5]||"currentColor")&&c(e,"fill",n),f&1024&&i!==(i="translate("+s[10][0]/-2+" "+s[10][1]/-2+")")&&c(e,"transform",i)},d(s){s&&w(e)}}}function $e(l){let e,t=l[10][4]&&oe(l);return{c(){t&&t.c(),e=ze()},m(n,i){t&&t.m(n,i),p(n,e,i)},p(n,[i]){n[10][4]?t?t.p(n,i):(t=oe(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:K,o:K,d(n){t&&t.d(n),n&&w(e)}}}function xe(l,e,t){let{class:n=""}=e,{id:i=""}=e,{style:s=""}=e,{icon:f}=e,{size:o=""}=e,{color:a=""}=e,{fw:r=!1}=e,{pull:m=""}=e,{scale:u=1}=e,{translateX:d=0}=e,{translateY:_=0}=e,{rotate:y=""}=e,{flip:g=!1}=e,{spin:z=!1}=e,{pulse:W=!1}=e,{primaryColor:v=""}=e,{secondaryColor:C=""}=e,{primaryOpacity:P=1}=e,{secondaryOpacity:U=.4}=e,{swapOpacity:J=!1}=e,Q,Z,$;return l.$$set=h=>{"class"in h&&t(0,n=h.class),"id"in h&&t(1,i=h.id),"style"in h&&t(13,s=h.style),"icon"in h&&t(14,f=h.icon),"size"in h&&t(15,o=h.size),"color"in h&&t(2,a=h.color),"fw"in h&&t(16,r=h.fw),"pull"in h&&t(17,m=h.pull),"scale"in h&&t(18,u=h.scale),"translateX"in h&&t(19,d=h.translateX),"translateY"in h&&t(20,_=h.translateY),"rotate"in h&&t(21,y=h.rotate),"flip"in h&&t(22,g=h.flip),"spin"in h&&t(3,z=h.spin),"pulse"in h&&t(4,W=h.pulse),"primaryColor"in h&&t(5,v=h.primaryColor),"secondaryColor"in h&&t(6,C=h.secondaryColor),"primaryOpacity"in h&&t(7,P=h.primaryOpacity),"secondaryOpacity"in h&&t(8,U=h.secondaryOpacity),"swapOpacity"in h&&t(9,J=h.swapOpacity)},l.$$.update=()=>{l.$$.dirty&16384&&t(10,Q=f&&f.icon||[0,0,"",[],""]),l.$$.dirty&237568&&t(11,Z=Ue(s,o,m,r)),l.$$.dirty&8126464&&t(12,$=Je(u,d,_,y,g,512))},[n,i,a,z,W,v,C,P,U,J,Q,Z,$,s,f,o,r,m,u,d,_,y,g]}class et extends B{constructor(e){super(),G(this,e,xe,$e,A,{class:0,id:1,style:13,icon:14,size:15,color:2,fw:16,pull:17,scale:18,translateX:19,translateY:20,rotate:21,flip:22,spin:3,pulse:4,primaryColor:5,secondaryColor:6,primaryOpacity:7,secondaryOpacity:8,swapOpacity:9})}}function tt(l){let e;return{c(){e=S("Octaves")},m(t,n){p(t,e,n)},d(t){t&&w(e)}}}function nt(l){let e;return{c(){e=S("Middle C")},m(t,n){p(t,e,n)},d(t){t&&w(e)}}}function lt(l){let e,t,n,i,s,f,o,a,r,m;e=new le({props:{$$slots:{default:[tt]},$$scope:{ctx:l}}});function u(g){l[9](g)}let d={};l[0].octaves!==void 0&&(d.value=l[0].octaves),n=new ie({props:d}),ee.push(()=>te(n,"value",u)),f=new le({props:{$$slots:{default:[nt]},$$scope:{ctx:l}}});function _(g){l[10](g)}let y={};return l[0].middleOctave!==void 0&&(y.value=l[0].middleOctave),a=new ie({props:y}),ee.push(()=>te(a,"value",_)),{c(){O(e.$$.fragment),t=E(),O(n.$$.fragment),s=E(),O(f.$$.fragment),o=E(),O(a.$$.fragment)},m(g,z){I(e,g,z),p(g,t,z),I(n,g,z),p(g,s,z),I(f,g,z),p(g,o,z),I(a,g,z),m=!0},p(g,z){const W={};z&32768&&(W.$$scope={dirty:z,ctx:g}),e.$set(W);const v={};!i&&z&1&&(i=!0,v.value=g[0].octaves,ne(()=>i=!1)),n.$set(v);const C={};z&32768&&(C.$$scope={dirty:z,ctx:g}),f.$set(C);const P={};!r&&z&1&&(r=!0,P.value=g[0].middleOctave,ne(()=>r=!1)),a.$set(P)},i(g){m||(b(e.$$.fragment,g),b(n.$$.fragment,g),b(f.$$.fragment,g),b(a.$$.fragment,g),m=!0)},o(g){k(e.$$.fragment,g),k(n.$$.fragment,g),k(f.$$.fragment,g),k(a.$$.fragment,g),m=!1},d(g){N(e,g),g&&w(t),N(n,g),g&&w(s),N(f,g),g&&w(o),N(a,g)}}}function st(l){let e,t;return e=new ge({props:{$$slots:{default:[lt]},$$scope:{ctx:l}}}),{c(){O(e.$$.fragment)},m(n,i){I(e,n,i),t=!0},p(n,i){const s={};i&32769&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function it(l){let e,t;return e=new he({props:{$$slots:{default:[st]},$$scope:{ctx:l}}}),{c(){O(e.$$.fragment)},m(n,i){I(e,n,i),t=!0},p(n,i){const s={};i&32769&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function ft(l){let e,t;return e=new et({props:{icon:ve.definition}}),{c(){O(e.$$.fragment)},m(n,i){I(e,n,i),t=!0},p:K,i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function at(l){let e,t,n,i;return e=new q({props:{padding:8,$$slots:{default:[ft]},$$scope:{ctx:l}}}),e.$on("click",l[12]),n=new qe({props:{onResize:l[13]}}),{c(){O(e.$$.fragment),t=E(),O(n.$$.fragment)},m(s,f){I(e,s,f),p(s,t,f),I(n,s,f),i=!0},p(s,f){const o={};f&32768&&(o.$$scope={dirty:f,ctx:s}),e.$set(o);const a={};f&5&&(a.onResize=s[13]),n.$set(a)},i(s){i||(b(e.$$.fragment,s),b(n.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),k(n.$$.fragment,s),i=!1},d(s){N(e,s),s&&w(t),N(n,s)}}}function ot(l){let e,t,n,i;return e=new Se({props:{octaves:l[0].octaves,middleC:l[0].middleOctave*12,keysPressed:[...l[1].values()],height:l[0].height,width:l[0].width}}),e.$on("noteon",l[4]),e.$on("noteoff",l[5]),n=new Te({props:{$$slots:{default:[at]},$$scope:{ctx:l}}}),{c(){O(e.$$.fragment),t=E(),O(n.$$.fragment)},m(s,f){I(e,s,f),p(s,t,f),I(n,s,f),i=!0},p(s,f){const o={};f&1&&(o.octaves=s[0].octaves),f&1&&(o.middleC=s[0].middleOctave*12),f&2&&(o.keysPressed=[...s[1].values()]),f&1&&(o.height=s[0].height),f&1&&(o.width=s[0].width),e.$set(o);const a={};f&32773&&(a.$$scope={dirty:f,ctx:s}),n.$set(a)},i(s){i||(b(e.$$.fragment,s),b(n.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),k(n.$$.fragment,s),i=!1},d(s){N(e,s),s&&w(t),N(n,s)}}}function rt(l){let e,t;return e=new ge({props:{alignItems:"flex-end",$$slots:{default:[ot]},$$scope:{ctx:l}}}),{c(){O(e.$$.fragment)},m(n,i){I(e,n,i),t=!0},p(n,i){const s={};i&32775&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(b(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function ut(l){let e,t,n,i;return e=new Me({props:{folded:!l[0].showGui,$$slots:{default:[it]},$$scope:{ctx:l}}}),e.$on("resize",l[11]),n=new he({props:{$$slots:{default:[rt]},$$scope:{ctx:l}}}),{c(){O(e.$$.fragment),t=E(),O(n.$$.fragment)},m(s,f){I(e,s,f),p(s,t,f),I(n,s,f),i=!0},p(s,[f]){const o={};f&1&&(o.folded=!s[0].showGui),f&32769&&(o.$$scope={dirty:f,ctx:s}),e.$set(o);const a={};f&32775&&(a.$$scope={dirty:f,ctx:s}),n.$set(a)},i(s){i||(b(e.$$.fragment,s),b(n.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),k(n.$$.fragment,s),i=!1},d(s){N(e,s),s&&w(t),N(n,s)}}}const wt=`
    A simple piano UI that can be used to play notes.
    It will also highlight any notes played it its MIDI input.
    `;function ct(l,e,t){let n;Ce(l,Oe,v=>t(2,n=v));let{id:i}=e;const s={MIDI:(v,C,P)=>{a("MIDI",v,C,P),Ne(v,C,P)?(m.add(C),t(1,m)):De(v,C,P)&&(m.delete(C),t(1,m))}},f={MIDI:new Set};let{state:o={octaves:2,middleOctave:5,showGui:!0,height:90,width:550}}=e;const a=Ie(i,f),r=T();let m=new Set;function u(v){const C=v.detail;a("MIDI",144,C,127)}function d(v){const C=v.detail;a("MIDI",144,C,0)}function _(v){l.$$.not_equal(o.octaves,v)&&(o.octaves=v,t(0,o))}function y(v){l.$$.not_equal(o.middleOctave,v)&&(o.middleOctave=v,t(0,o))}function g(v){H.call(this,l,v)}const z=()=>{t(0,o.showGui=!o.showGui,o)},W=(v,C)=>{t(0,o.width=se(o.width+2*v/n,550,1e4),o),t(0,o.height=se(o.height+2*C/n,82,1e4),o),r("resize")};return l.$$set=v=>{"id"in v&&t(6,i=v.id),"state"in v&&t(0,o=v.state)},[o,m,n,r,u,d,i,s,f,_,y,g,z,W]}class yt extends B{constructor(e){super(),G(this,e,ct,ut,A,{id:6,inputs:7,outputs:8,state:0})}get inputs(){return this.$$.ctx[7]}get outputs(){return this.$$.ctx[8]}}export{yt as default,wt as doc};
